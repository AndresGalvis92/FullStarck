{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getProductos, addProducto, updateProducto, deleteProducto } from '../services/productosService';\nconst useProductos = () => {\n  _s();\n  const [productos, setProductos] = useState([]);\n  const [producto, setProducto] = useState({\n    nombre: '',\n    codigo: '',\n    inventario: '',\n    marca: '',\n    valor: '',\n    imagen: null\n  });\n  const [productoIdParaEditar, setProductoIdParaEditar] = useState(null);\n\n  // Cargar productos al iniciar\n  useEffect(() => {\n    fetchProductos();\n  }, []);\n\n  // Obtener productos\n  const fetchProductos = async () => {\n    try {\n      const {\n        data\n      } = await getProductos();\n      setProductos(data); // Asegura que los productos incluyen la ruta de la imagen\n    } catch (error) {\n      console.error('Error al obtener productos:', error);\n    }\n  };\n\n  // Guardar producto (crear o actualizar)\n  const guardar = async () => {\n    if (productoIdParaEditar) {\n      await updateProducto(productoIdParaEditar, producto);\n      setProductoIdParaEditar(null);\n    } else {\n      await addProducto(producto);\n    }\n    fetchProductos();\n    resetProducto();\n  };\n\n  // Eliminar producto\n  const eliminar = async id => {\n    await deleteProducto(id);\n    fetchProductos();\n  };\n\n  // Cargar producto para editar\n  const cargarProductoParaEditar = prod => {\n    setProductoIdParaEditar(prod.id);\n    setProducto(prod);\n  };\n\n  // Resetear formulario\n  const resetProducto = () => {\n    setProducto({\n      nombre: '',\n      codigo: '',\n      inventario: '',\n      marca: '',\n      valor: '',\n      imagen: null\n    });\n  };\n  return {\n    productos,\n    producto,\n    setProducto,\n    guardar,\n    eliminar,\n    cargarProductoParaEditar,\n    productoIdParaEditar\n  };\n};\n_s(useProductos, \"GRr2zOqZINLRVuotXLi4U6pipJw=\");\nexport default useProductos;","map":{"version":3,"names":["useState","useEffect","getProductos","addProducto","updateProducto","deleteProducto","useProductos","_s","productos","setProductos","producto","setProducto","nombre","codigo","inventario","marca","valor","imagen","productoIdParaEditar","setProductoIdParaEditar","fetchProductos","data","error","console","guardar","resetProducto","eliminar","id","cargarProductoParaEditar","prod"],"sources":["C:/Users/DELL/OneDrive - ciaf.edu.co/PROYECTOS/fullstack v4/FullStarck/frontend/src/hooks/useProductos.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { getProductos, addProducto, updateProducto, deleteProducto } from '../services/productosService';\r\n\r\nconst useProductos = () => {\r\n  const [productos, setProductos] = useState([]);\r\n  const [producto, setProducto] = useState({ nombre: '', codigo: '', inventario: '', marca: '', valor: '', imagen: null });\r\n  const [productoIdParaEditar, setProductoIdParaEditar] = useState(null);\r\n\r\n  // Cargar productos al iniciar\r\n  useEffect(() => {\r\n    fetchProductos();\r\n  }, []);\r\n\r\n  // Obtener productos\r\n  const fetchProductos = async () => {\r\n    try {\r\n      const { data } = await getProductos();\r\n      setProductos(data); // Asegura que los productos incluyen la ruta de la imagen\r\n    } catch (error) {\r\n      console.error('Error al obtener productos:', error);\r\n    }\r\n  };\r\n\r\n  // Guardar producto (crear o actualizar)\r\n  const guardar = async () => {\r\n    if (productoIdParaEditar) {\r\n      await updateProducto(productoIdParaEditar, producto);\r\n      setProductoIdParaEditar(null);\r\n    } else {\r\n      await addProducto(producto);\r\n    }\r\n    fetchProductos();\r\n    resetProducto();\r\n  };\r\n\r\n  // Eliminar producto\r\n  const eliminar = async (id) => {\r\n    await deleteProducto(id);\r\n    fetchProductos();\r\n  };\r\n\r\n  // Cargar producto para editar\r\n  const cargarProductoParaEditar = (prod) => {\r\n    setProductoIdParaEditar(prod.id);\r\n    setProducto(prod);\r\n  };\r\n\r\n  // Resetear formulario\r\n  const resetProducto = () => {\r\n    setProducto({ nombre: '', codigo: '', inventario: '', marca: '', valor: '', imagen: null });\r\n  };\r\n\r\n  return {\r\n    productos,\r\n    producto,\r\n    setProducto,\r\n    guardar,\r\n    eliminar,\r\n    cargarProductoParaEditar,\r\n    productoIdParaEditar,\r\n  };\r\n};\r\n\r\nexport default useProductos;\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,YAAY,EAAEC,WAAW,EAAEC,cAAc,EAAEC,cAAc,QAAQ,8BAA8B;AAExG,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACU,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC;IAAEY,MAAM,EAAE,EAAE;IAAEC,MAAM,EAAE,EAAE;IAAEC,UAAU,EAAE,EAAE;IAAEC,KAAK,EAAE,EAAE;IAAEC,KAAK,EAAE,EAAE;IAAEC,MAAM,EAAE;EAAK,CAAC,CAAC;EACxH,MAAM,CAACC,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;;EAEtE;EACAC,SAAS,CAAC,MAAM;IACdmB,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMA,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAM;QAAEC;MAAK,CAAC,GAAG,MAAMnB,YAAY,CAAC,CAAC;MACrCO,YAAY,CAACY,IAAI,CAAC,CAAC,CAAC;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACrD;EACF,CAAC;;EAED;EACA,MAAME,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1B,IAAIN,oBAAoB,EAAE;MACxB,MAAMd,cAAc,CAACc,oBAAoB,EAAER,QAAQ,CAAC;MACpDS,uBAAuB,CAAC,IAAI,CAAC;IAC/B,CAAC,MAAM;MACL,MAAMhB,WAAW,CAACO,QAAQ,CAAC;IAC7B;IACAU,cAAc,CAAC,CAAC;IAChBK,aAAa,CAAC,CAAC;EACjB,CAAC;;EAED;EACA,MAAMC,QAAQ,GAAG,MAAOC,EAAE,IAAK;IAC7B,MAAMtB,cAAc,CAACsB,EAAE,CAAC;IACxBP,cAAc,CAAC,CAAC;EAClB,CAAC;;EAED;EACA,MAAMQ,wBAAwB,GAAIC,IAAI,IAAK;IACzCV,uBAAuB,CAACU,IAAI,CAACF,EAAE,CAAC;IAChChB,WAAW,CAACkB,IAAI,CAAC;EACnB,CAAC;;EAED;EACA,MAAMJ,aAAa,GAAGA,CAAA,KAAM;IAC1Bd,WAAW,CAAC;MAAEC,MAAM,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEC,UAAU,EAAE,EAAE;MAAEC,KAAK,EAAE,EAAE;MAAEC,KAAK,EAAE,EAAE;MAAEC,MAAM,EAAE;IAAK,CAAC,CAAC;EAC7F,CAAC;EAED,OAAO;IACLT,SAAS;IACTE,QAAQ;IACRC,WAAW;IACXa,OAAO;IACPE,QAAQ;IACRE,wBAAwB;IACxBV;EACF,CAAC;AACH,CAAC;AAACX,EAAA,CA1DID,YAAY;AA4DlB,eAAeA,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}